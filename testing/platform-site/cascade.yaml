# Default values for platform-site.
gateway: gateway/one-gateway
hosts:
- cascade-devtest.dnv.com

routes:
  - service: cas-assets-svc
    externalMatchConfig:
      urlPrefixes:
        - cas-assets-svc
    versions:
      - version: blue
        weight: 90
      - version: green
        weight: 10
      - version: canary
        externalIstioMatch:
          - headers:
              x-user-type:
                exact: "adventurous"
      - version: v1
        externalMatchConfig:
          urlPrefixes:
          - cas-assets-svc-v1



  # cascade-uat.efficientenergy.com/assets
  - service: asset-registry-svc
    namespace: cascade-uat
    versions:
      - version: v1
      - version: v2-internal
        internalOnly: true
    timeout: 10s
    externalMatchConfig:
      urlPrefixes:
      - assets



  - service: internal
    namespace: ns
    versions:
      - version: v1
      - version: v2
        internalOnly: false
        externalIstioMatch:
          - uri:
              prefix: /v2/

    internalOnly: true
    timeout: 10s

  # - service: my-app
  #   versions:
  #     - version: v1
  #   externalMatchConfig:
  #     urlPrefixes:
  #     - prefix1
  #     - prefix2
  #     rewriteUrlPrefix:
  #       enabled: false
  #       replaceWith: "blah"

  - service:  my-app-2
    versions:
      - version: v1
    externalMatchConfig:
      urlExactMatches:
        - test-exact
    loadBalancerPolicy: ROUND_ROBIN #RANDOM

  # - service:  my-other-app
  #   versions:
  #     - version: v4
  #   externalMatchConfig:
  #     catchAll: true
  #     retries:
  #       enabled: true
  #   corsPolicy:

